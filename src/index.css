@import url("https://fonts.googleapis.com/css2?family=DM+Serif+Text:ital@0;1&family=Mona+Sans:ital,wght@0,200..900;1,200..900&display=swap");
@import "tailwindcss";

@font-face {
    font-family: "Modern Negra";
    src: url("/fonts/Bohemian Soul.otf") format("truetype");
}

@theme {
    --color-yellow: #e7d393;
    --color-white-100: #efefef;
    --font-sans: "Mona Sans", sans-serif;
    --font-modern-negra: "Modern Negra", sans-serif;
    --font-serif: "DM Serif Text", serif;
}

html,
body {
    width: 100%;
    background-color: #131111;
    color: white;
    scroll-behavior: smooth;
    overflow-x: hidden; /* Keep this, it's generally good */
}

@utility flex-center { @apply flex justify-center items-center; }
@utility col-center { @apply flex flex-col justify-center items-center; }
@utility abs-center { @apply absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2; }

@utility text-gradient {
    background: linear-gradient(to bottom, #ffffff, #898989);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
}

@utility radial-gradient {
    background: radial-gradient(circle at center, #434343 0%, #000 50%, transparent 100%);
}

@utility masked-img {
    mask-image: url("/images/mask-img.png");
    mask-repeat: no-repeat;
    mask-position: center;
    mask-size: 50%;
}

@layer utilities {
    .custom-tooltip-trigger { position: relative; }

    .custom-tooltip-trigger[data-tooltip]::before,
    .custom-tooltip-trigger[data-tooltip]::after {
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        pointer-events: none;
    }

    /* Tooltip text */
    .custom-tooltip-trigger[data-tooltip]::before {
        content: attr(data-tooltip);
        position: absolute;
        bottom: calc(100% + 10px);
        left: 50%;
        transform: translateX(-50%) translateY(0);
        background-color: var(--color-white-100);
        color: black;
        padding: 6px 10px;
        border-radius: 4px;
        white-space: nowrap;
        font-size: 0.875rem;
        z-index: 100;
    }

    /* Tooltip arrow */
    .custom-tooltip-trigger[data-tooltip]::after {
        content: '';
        position: absolute;
        bottom: calc(101%);
        left: 50%;
        transform: translateX(-50%) translateY(0);
        border-width: 5px;
        border-style: solid;
        border-color: var(--color-white-100) transparent transparent transparent;
        z-index: 100;
    }

    .custom-tooltip-trigger[data-tooltip]:hover::before,
    .custom-tooltip-trigger[data-tooltip]:hover::after {
        opacity: 1;
        visibility: visible;
        transition-delay: 0.1s;
    }

    .bleed-100vw {
        left: 50%;
        transform: translateX(-50%); /* center on the viewport */
        width: 100vw;
        max-width: 100vw;
        overflow: clip;   /* prevents the extra scrollbar */
        contain: paint;
        pointer-events: none;
        white-space: nowrap;
    }
}

@layer components {
    main { @apply w-full overflow-x-hidden; }

    /* In your @layer components section, or directly on the nav rule */
    @layer components {
        nav {
            @apply fixed z-50 w-full;
            /* Apply backdrop-filter directly in CSS */
            backdrop-filter: blur(10px); /* This will always be present for the nav */
            background-color: transparent; /* Start transparent, GSAP animates to #000000a0 */
            transition: background-color 0.5s ease-out; /* Optional CSS transition for a fallback or smoother blend */

            div { @apply flex md:flex-row flex-col md:justify-between items-center gap-5 py-5 lg:px-0 px-5 container mx-auto; }
            p { @apply font-modern-negra text-3xl -mb-2; }
            a { @apply cursor-pointer text-nowrap md:text-base text-sm; }
            ul { @apply flex-center lg:gap-12 gap-5 md:gap-7; }
        }
        /* ... rest of your components ... */
        .scrolling-experience-bg-l,
        .scrolling-experience-bg-r {
            /* Keep these properties, but move absolute positioning and width to a new wrapper */
            @apply absolute w-full whitespace-nowrap z-0 pointer-events-none text-7xl md:text-8xl font-modern-negra; /* Removed width-related classes */
            font-family: var(--font-modern-negra);
            color: transparent; /* Make text transparent to show outline */
            -webkit-text-stroke: 4px var(--color-white-100); /* White outline */
            text-stroke: 3px var(--color-white-100);
            opacity: 0.03; /* Very subtle */
            user-select: none; /* Prevent selection */
            line-height: 1; /* Adjust line height for better spacing */
            will-change: transform; /* Hint for browser optimization */
            width: 100vw;                /* true viewport width, not container width */
            max-width: 100vw;            /* guard against Safari quirks */
            overflow: clip;
            contain: paint;
        }

        /* Position the specific scrolling backgrounds */
        .scrolling-experience-bg-l {
            top: 0;
            left: 0;
        }
        .scrolling-experience-bg-r {
            bottom: 0;
            right: 0;
        }

        /* The actual animated content inside */
        .scrolling-experience-bg-l .scroll-content,
        .scrolling-experience-bg-r .scroll-content {
            display: inline-block; /* Essential for text to be side-by-side */
            /* Make sure the scroll-content is larger than its parent for animation */
            min-width: 200%;
        }

        /* Keyframe animation for infinite scroll */
        @keyframes scroll-left {
            0% { transform: translateX(0%); }
            100% { transform: translateX(-50%); } /* Changed to -50% because we duplicated content */
        }

        @keyframes scroll-right {
            0% { transform: translateX(-50%); } /* Start off-screen to the left, half way */
            100% { transform: translateX(0%); }  /* Move to its original position */
        }

        /* Apply animation */
        .scrolling-experience-bg-l .scroll-content {
            animation: scroll-left 60s linear infinite; /* Adjust duration as needed */
        }

        .scrolling-experience-bg-r .scroll-content {
            animation: scroll-right 60s linear infinite;
        }
    }

    .noisy {
        @apply absolute inset-0 size-full;
        background: url("/images/noise.png"), rgba(0, 0, 0, 0.2);
        background-blend-mode: multiply;
    }

    #hero {
        @apply relative z-10 min-h-dvh w-full border border-transparent flex flex-col pt-20 pb-10;

        .title-wrapper {
            @apply relative;
            /* Stabilizers to prevent AA flicker while wrapper animates */
            backface-visibility: hidden;
            transform: translateZ(0);
            will-change: transform, opacity;
        }

        h1.title {
            @apply mt-10 md:mt-20 text-8xl md:text-[14vw] leading-none text-center font-modern-negra;
            color: white;
            /* keep in its own layer */
            backface-visibility: hidden;
            transform: translateZ(0);
            will-change: transform;
            /* better consistency across engines */
            -webkit-font-smoothing: antialiased;
            text-rendering: geometricPrecision;
            paint-order: stroke fill;
        }

        h1.title.outline-text-overlay {
            @apply absolute inset-0 flex justify-center items-center z-2;
            font-family: var(--font-modern-negra);
            text-align: center;

            /* overlay stays static; but keep same compositing hints */
            backface-visibility: hidden;
            transform: translateZ(0);
            will-change: transform; /* not opacity! */
            -webkit-font-smoothing: antialiased;
            text-rendering: geometricPrecision;
            paint-order: stroke fill;
            pointer-events: none; /* donâ€™t interfere with selections/hover */
        }

        .body {
            @apply container mx-auto flex flex-col lg:flex-row justify-between items-start lg:items-end px-5 flex-grow mt-10;

            .content {
                @apply flex flex-col w-full lg:w-fit gap-2 lg:gap-5 items-center lg:items-start text-center lg:text-left mb-10 lg:mb-0;

                p:nth-of-type(1) { @apply text-lg sm:text-xl lg:text-2xl font-serif text-white/70; }

                p.subtitle {
                    @apply font-modern-negra text-4xl sm:text-5xl md:text-6xl lg:text-6xl xl:text-7xl text-yellow max-w-4xl leading-tight;
                }

                p.subtitle i { @apply hidden lg:inline text-white/70 text-xl sm:text-2xl lg:text-3xl mt-2; }
            }

            .actions {
                @apply flex flex-col items-center lg:items-center justify-center self-center lg:self-end text-yellow lg:mb-0;
            }
        }

        .btn-resume {
            @apply cursor-pointer transition-all px-12 py-3 rounded-lg bg-yellow text-black border-b-[4px] inline-flex items-center font-semibold mb-6;
            border-color: color-mix(in oklab, black 25%, var(--color-yellow));
        }
        .btn-resume:hover { background-color: #efe1b8; }
        .btn-resume:active { background-color: #d6c380; }

        .icon-link { @apply cursor-pointer; color: var(--color-yellow); }
        .icon-link:hover { color: #efe1b8; }
        .icon-link:active { color: #d6c380; }
    }
}

.text-outline-shadow {
    color: #111;
    text-shadow:
            2px 0 0 #fff, -2px 0 0 #fff, 0 1px 0 #fff, 0 -2px 0 #fff,
            2px 2px 0 #fff, -2px -2px 0 #fff, 2px -2px 0 #fff, -2px 2px 0 #fff;
}